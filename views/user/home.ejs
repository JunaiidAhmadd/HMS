<%- include("partials/user_header", { pageTitle: "Hostel Home" }) %>

  <body class="d-flex flex-column min-vh-100">

    <!-- Navbar -->
    <%- include("partials/user_navbar") %>

      <!-- Hero Section -->
      <section
        class="hero-section vh-75 d-flex align-items-center justify-content-center text-center text-white relative"
        style="background: linear-gradient(to bottom, #0d6efd, #6610f2);">

        <div class="p-4 rounded-lg bg-white bg-opacity-10 backdrop-blur-md shadow-lg">
          <h1 class="display-4 fw-bold mb-3 animate-fade-in">
            Comfortable & Affordable Hostels
          </h1>
          <p class="lead mb-4 animate-fade-in-delay">
            Find your perfect room across our branches in Pakistan.
          </p>

          <a href="/user/reservation" class="btn btn-lg btn-light fw-bold animate-pop">
            <i class="bi bi-calendar2-check me-2"></i> Reserve a Room
          </a>
        </div>

      </section>

      <!-- Branches Section -->
      <section class="py-5">
        <div class="container">
          <h2 class="text-3xl font-semibold text-center mb-5">Our Branches</h2>

          <div class="row g-4 justify-content-center">

            <% if (branches && branches.length> 0) { %>
              <% branches.forEach(branch=> { %>
                <div class="col-12 col-md-6 col-lg-4">
                  <div class="card shadow-sm h-100 border-0 rounded-3 hover-up">

                    <!-- Branch Image (Placeholder or First Image) -->
                    <img src="<%= branch.photos && branch.photos.length > 0 ? branch.photos[0] : '/images/room.png' %>"
                      class="card-img-top" alt="<%= branch.name %>" style="height: 200px; object-fit: cover;">

                    <div class="card-body d-flex flex-column">
                      <h5 class="card-title fw-bold">
                        <%= branch.name %>
                      </h5>

                      <p class="text-muted small mb-3">
                        <i class="bi bi-geo-alt-fill text-danger"></i>
                        <%= branch.address %>
                      </p>

                      <!-- Facilities Preview -->
                      <div class="mb-3">
                        <% if (branch.facilities && branch.facilities.length> 0) { %>
                          <div class="d-flex flex-wrap gap-1">
                            <% branch.facilities.slice(0, 3).forEach(f=> { %>
                              <span class="badge bg-light text-dark border">
                                <%= f %>
                              </span>
                              <% }) %>
                                <% if (branch.facilities.length> 3) { %>
                                  <span class="badge bg-light text-muted border">+<%= branch.facilities.length - 3 %>
                                      more</span>
                                  <% } %>
                          </div>
                          <% } else { %>
                            <small class="text-muted fst-italic">No specific facilities listed.</small>
                            <% } %>
                      </div>

                      <p class="card-text flex-grow-1">
                        Explore our comfortable rooms at <%= branch.name %>.
                      </p>

                      <a href="/user/branch?id=<%= branch._id %>" class="btn btn-primary mt-auto w-100">
                        View Rooms
                      </a>
                    </div>
                  </div>
                </div>
                <% }) %>
                  <% } else { %>
                    <div class="col-12 text-center">
                      <p class="text-muted lead">No branches available at the moment.</p>
                    </div>
                    <% } %>

          </div>
        </div>
      </section>

      <!-- Footer -->
      <%- include("partials/user_footer") %>

        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <!-- Small UI Animation Styles -->
        <style>
          .hover-up:hover {
            transform: translateY(-5px);
            transition: 0.3s ease;
          }

          .animate-fade-in {
            animation: fadeIn 1s ease;
          }

          .animate-fade-in-delay {
            animation: fadeIn 1.5s ease;
          }

          .animate-pop {
            animation: popIn 0.8s ease;
          }

          @keyframes fadeIn {
            from {
              opacity: 0;
              transform: translateY(10px);
            }

            to {
              opacity: 1;
              transform: translateY(0);
            }
          }

          @keyframes popIn {
            0% {
              transform: scale(0.8);
              opacity: 0;
            }

            100% {
              transform: scale(1);
              opacity: 1;
            }
          }
        </style>

  </body>

  </html>